{% extends 'admin/base.html' %}
{% load static %}

{% block title %}Doctor Schedules - Curexa Admin{% endblock %}

{% block navbar_extra %}
<!-- Breadcrumb navigation -->
<nav aria-label="breadcrumb" class="ms-3">
    <ol class="breadcrumb mb-0">
        <li class="breadcrumb-item"><a href="#" class="text-white">Dashboard</a></li>
        <li class="breadcrumb-item"><a href="#" class="text-white">Doctors</a></li>
        <li class="breadcrumb-item active text-light" aria-current="page">Schedules</li>
    </ol>
</nav>
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="page-title-section">
            <h2><i class="fas fa-calendar-alt me-2"></i>Doctor Schedules</h2>
            <p class="text-muted mb-0">Manage and view doctor appointments and availability</p>
        </div>
    </div>
</div>

<!-- Quick Stats Row -->
<div class="row mt-4">
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card medical-border h-100">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-8">
                        <h5 class="card-title stats-number">{{todays_appointments}}</h5>
                        <p class="card-text stats-label">Today's Appointments</p>
                    </div>
                    <div class="col-4 text-end">
                        <i class="fas fa-calendar-day card-icon text-primary"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card medical-border h-100">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-8">
                        <h5 class="card-title stats-number">{{doctor_on_duty}}</h5>
                        <p class="card-text stats-label">Doctors On Duty</p>
                    </div>
                    <div class="col-4 text-end">
                        <i class="fas fa-user-md card-icon text-success"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card medical-border h-100">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-8">
                        <h5 class="card-title stats-number">{{available_time_slots}}</h5>
                        <p class="card-text stats-label">Available Time Slots</p>
                    </div>
                    <div class="col-4 text-end">
                        <i class="fas fa-clock card-icon text-info"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card medical-border h-100">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-8">
                        <h5 class="card-title stats-number">{{emergency_cases}}</h5>
                        <p class="card-text stats-label">Emergency Cases</p>
                    </div>
                    <div class="col-4 text-end">
                        <i class="fas fa-ambulance card-icon text-danger"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Controls Row -->
<div class="row mb-4">
    <div class="col-md-3">
        <div class="d-flex">
            <select class="form-select me-2" id="doctorFilter">
                <option value="all" selected>All Doctors</option>
                {% for doctor in doctors %}
                    <option value="{{ doctor.id }}">{{ doctor.doctor__first_name }} - {{ doctor.specialization__name }}</option>
                {% endfor %}
            </select>
        </div>
    </div>
    <div class="col-md-4">
        <div class="d-flex">
            <input type="date" class="form-control me-2" id="datePicker" value="2024-01-21">
            <div class="btn-group">
                <button class="btn btn-outline-light" id="todayBtn">Today</button>
                <button class="btn btn-outline-light" id="nextDay">
                    <i class="fas fa-chevron-right"></i>
                </button>
                <button class="btn btn-outline-light" id="nextWeek">
                    Next Week <i class="fas fa-chevron-right ms-1"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <div class="dropdown">
            <button class="btn btn-outline-light dropdown-toggle w-100" type="button" id="viewTypeDropdown" data-bs-toggle="dropdown">
                <i class="fas fa-eye me-1"></i> View Type
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item active" href="#" data-view="daily">Daily</a></li>
                <li><a class="dropdown-item" href="#" data-view="weekly">Weekly</a></li>
                <li><a class="dropdown-item" href="#" data-view="monthly">Monthly</a></li>
            </ul>
        </div>
    </div>
    <div class="col-md-3 text-end">
        <a href="#" class="btn btn-success" id="newScheduleBtn">
            <i class="fas fa-plus me-1"></i> New Schedule
        </a>
        <div class="btn-group ms-2">
            <button class="btn btn-outline-light dropdown-toggle" type="button" data-bs-toggle="dropdown">
                <i class="fas fa-download"></i> Export
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item export-btn" href="#" data-format="pdf"><i class="fas fa-file-pdf me-2"></i>PDF</a></li>
                <li><a class="dropdown-item export-btn" href="#" data-format="excel"><i class="fas fa-file-excel me-2"></i>Excel</a></li>
                <li><a class="dropdown-item export-btn" href="#" data-format="csv"><i class="fas fa-file-csv me-2"></i>CSV</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="#" id="importSchedule"><i class="fas fa-file-import me-2"></i>Import</a></li>
            </ul>
        </div>
        <button class="btn btn-outline-light ms-2" id="printSchedule">
            <i class="fas fa-print"></i>
        </button>
    </div>
</div>

<!-- Filters Row -->
<div class="row mb-3">
    <div class="col-12">
        <div class="card medical-border">
            <div class="card-body py-2">
                <div class="row g-2">
                    <div class="col-md-3">
                        <select class="form-select form-select-sm" id="departmentFilter">
                            <option value="">All Departments</option>
                            {% for department in departments %}
                                <option value="{{ department.id }}">{{ department.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-3">
                        <select class="form-select form-select-sm" id="appointmentTypeFilter">
                            <option value="">All Appointment Types</option>
                            {% for type in appointment_types %}
                                <option value="{{ type.value }}">{{ type.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-3">
                        <select class="form-select form-select-sm" id="statusFilter">
                            <option value="">All Status</option>
                            {% for status in appointment_status %}
                                <option value="{{ status.value }}">{{ status.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-3">
                        <input type="text" class="form-control form-control-sm" id="searchPatient" placeholder="Search patient...">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="card medical-border">
            <div class="card-body">
                <h4 class="mb-3" id="scheduleDate">Sunday, January 21, 2024</h4>
                
                <!-- Schedule View Tabs -->
                <ul class="nav nav-tabs" id="scheduleTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="daily-tab" data-bs-toggle="tab" data-bs-target="#daily" type="button" role="tab" aria-controls="daily" aria-selected="true">
                            <i class="fas fa-calendar-day me-1"></i> Daily View
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="weekly-tab" data-bs-toggle="tab" data-bs-target="#weekly" type="button" role="tab" aria-controls="weekly" aria-selected="false">
                            <i class="fas fa-calendar-week me-1"></i> Weekly View
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="doctors-tab" data-bs-toggle="tab" data-bs-target="#doctors" type="button" role="tab" aria-controls="doctors" aria-selected="false">
                            <i class="fas fa-user-md me-1"></i> By Doctor
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="grid-tab" data-bs-toggle="tab" data-bs-target="#grid" type="button" role="tab" aria-controls="grid" aria-selected="false">
                            <i class="fas fa-th me-1"></i> Grid View
                        </button>
                    </li>
                </ul>
                
                <div class="tab-content mt-3" id="scheduleTabContent">
                    <!-- Daily View with Horizontal Scroll for Many Doctors -->
                    <div class="tab-pane fade show active" id="daily" role="tabpanel" aria-labelledby="daily-tab">
                        <div class="table-responsive">
                            <div class="doctor-scroll-container">
                                <table class="table table-hover" id="dailySchedule">
                                    <thead>
                                        <tr>
                                            <th class="time-column">Time</th>
                                            <!-- Doctor 1 -->
                                            <th class="doctor-column">
                                                <div class="doctor-header">
                                                    <img src="{% static 'images/doctors/doctor1.jpg' %}" alt="Dr. Sarah Johnson" class="rounded-circle me-2" width="24" height="24">
                                                    <div>
                                                        <div class="fw-bold">Dr. S. Johnson</div>
                                                        <small class="text-muted">Cardiology</small>
                                                    </div>
                                                </div>
                                            </th>
                                            <!-- Doctor 2 -->
                                            <th class="doctor-column">
                                                <div class="doctor-header">
                                                    <img src="{% static 'images/doctors/doctor2.jpg' %}" alt="Dr. Michael Chen" class="rounded-circle me-2" width="24" height="24">
                                                    <div>
                                                        <div class="fw-bold">Dr. M. Chen</div>
                                                        <small class="text-muted">Neurology</small>
                                                    </div>
                                                </div>
                                            </th>
                                            <!-- Doctor 3 -->
                                            <th class="doctor-column">
                                                <div class="doctor-header">
                                                    <img src="{% static 'images/doctors/doctor3.jpg' %}" alt="Dr. Anita Patel" class="rounded-circle me-2" width="24" height="24">
                                                    <div>
                                                        <div class="fw-bold">Dr. A. Patel</div>
                                                        <small class="text-muted">Pediatrics</small>
                                                    </div>
                                                </div>
                                            </th>
                                            <!-- Doctor 4 -->
                                            <th class="doctor-column">
                                                <div class="doctor-header">
                                                    <img src="{% static 'images/doctors/doctor4.jpg' %}" alt="Dr. James Williams" class="rounded-circle me-2" width="24" height="24">
                                                    <div>
                                                        <div class="fw-bold">Dr. J. Williams</div>
                                                        <small class="text-muted">Orthopedics</small>
                                                    </div>
                                                </div>
                                            </th>
                                            <!-- Doctor 5 -->
                                            <th class="doctor-column">
                                                <div class="doctor-header">
                                                    <img src="{% static 'images/doctors/doctor5.jpg' %}" alt="Dr. Emily Rodriguez" class="rounded-circle me-2" width="24" height="24">
                                                    <div>
                                                        <div class="fw-bold">Dr. E. Rodriguez</div>
                                                        <small class="text-muted">Dermatology</small>
                                                    </div>
                                                </div>
                                            </th>
                                            <!-- Doctor 6 -->
                                            <th class="doctor-column">
                                                <div class="doctor-header">
                                                    <img src="{% static 'images/doctors/doctor6.jpg' %}" alt="Dr. Robert Kim" class="rounded-circle me-2" width="24" height="24">
                                                    <div>
                                                        <div class="fw-bold">Dr. R. Kim</div>
                                                        <small class="text-muted">Oncology</small>
                                                    </div>
                                                </div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Morning Schedule -->
                                        <tr>
                                            <td class="fw-bold time-column">8:00 AM</td>
                                            <td class="schedule-cell" data-time="08:00" data-doctor="DR101" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT001">
                                                    <small class="d-block">John Smith</small>
                                                    <small class="badge badge-sm type-badge checkup">Checkup</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="08:00" data-doctor="DR102" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="08:00" data-doctor="DR103" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT002">
                                                    <small class="d-block">Emma Wilson</small>
                                                    <small class="badge badge-sm type-badge followup">Follow-up</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="08:00" data-doctor="DR104" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT003">
                                                    <small class="d-block">Mike Johnson</small>
                                                    <small class="badge badge-sm type-badge procedure">Procedure</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="08:00" data-doctor="DR105" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="08:00" data-doctor="DR106" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT004">
                                                    <small class="d-block">Sarah Connor</small>
                                                    <small class="badge badge-sm type-badge consultation">Consultation</small>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold time-column">8:30 AM</td>
                                            <td class="schedule-cell" data-time="08:30" data-doctor="DR101" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT005">
                                                    <small class="d-block">John Smith</small>
                                                    <small class="badge badge-sm type-badge checkup">Checkup</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="08:30" data-doctor="DR102" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT006">
                                                    <small class="d-block">Robert Davis</small>
                                                    <small class="badge badge-sm type-badge emergency">Emergency</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="08:30" data-doctor="DR103" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT007">
                                                    <small class="d-block">Emma Wilson</small>
                                                    <small class="badge badge-sm type-badge followup">Follow-up</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="08:30" data-doctor="DR104" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="08:30" data-doctor="DR105" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT008">
                                                    <small class="d-block">Sophia Brown</small>
                                                    <small class="badge badge-sm type-badge checkup">Checkup</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="08:30" data-doctor="DR106" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT009">
                                                    <small class="d-block">Sarah Connor</small>
                                                    <small class="badge badge-sm type-badge consultation">Consultation</small>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold time-column">9:00 AM</td>
                                            <td class="schedule-cell" data-time="09:00" data-doctor="DR101" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="09:00" data-doctor="DR102" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT010">
                                                    <small class="d-block">Robert Davis</small>
                                                    <small class="badge badge-sm type-badge emergency">Emergency</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="09:00" data-doctor="DR103" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="09:00" data-doctor="DR104" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT011">
                                                    <small class="d-block">Michael Taylor</small>
                                                    <small class="badge badge-sm type-badge checkup">Checkup</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="09:00" data-doctor="DR105" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="09:00" data-doctor="DR106" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT012">
                                                    <small class="d-block">David Miller</small>
                                                    <small class="badge badge-sm type-badge followup">Follow-up</small>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold time-column">9:30 AM</td>
                                            <td class="schedule-cell" data-time="09:30" data-doctor="DR101" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="09:30" data-doctor="DR102" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="09:30" data-doctor="DR103" data-date="2024-01-21">
                                                <div class="appointment break">
                                                    <small><i class="fas fa-coffee"></i> Break</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="09:30" data-doctor="DR104" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT013">
                                                    <small class="d-block">Michael Taylor</small>
                                                    <small class="badge badge-sm type-badge checkup">Checkup</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="09:30" data-doctor="DR105" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="09:30" data-doctor="DR106" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT014">
                                                    <small class="d-block">David Miller</small>
                                                    <small class="badge badge-sm type-badge followup">Follow-up</small>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold time-column">10:00 AM</td>
                                            <td class="schedule-cell" data-time="10:00" data-doctor="DR101" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT015">
                                                    <small class="d-block">Jennifer Lee</small>
                                                    <small class="badge badge-sm type-badge consultation">Consultation</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="10:00" data-doctor="DR102" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT016">
                                                    <small class="d-block">William Brown</small>
                                                    <small class="badge badge-sm type-badge checkup">Checkup</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="10:00" data-doctor="DR103" data-date="2024-01-21">
                                                <div class="appointment break">
                                                    <small><i class="fas fa-coffee"></i> Break</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="10:00" data-doctor="DR104" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="10:00" data-doctor="DR105" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT017">
                                                    <small class="d-block">Olivia Martinez</small>
                                                    <small class="badge badge-sm type-badge emergency">Emergency</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="10:00" data-doctor="DR106" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                        </tr>
                                        <!-- Lunch Time -->
                                        <tr>
                                            <td class="fw-bold time-column">12:00 PM</td>
                                            <td class="schedule-cell" data-time="12:00" data-doctor="DR101" data-date="2024-01-21">
                                                <div class="appointment break">
                                                    <small><i class="fas fa-utensils"></i> Lunch</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="12:00" data-doctor="DR102" data-date="2024-01-21">
                                                <div class="appointment break">
                                                    <small><i class="fas fa-utensils"></i> Lunch</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="12:00" data-doctor="DR103" data-date="2024-01-21">
                                                <div class="appointment break">
                                                    <small><i class="fas fa-utensils"></i> Lunch</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="12:00" data-doctor="DR104" data-date="2024-01-21">
                                                <div class="appointment break">
                                                    <small><i class="fas fa-utensils"></i> Lunch</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="12:00" data-doctor="DR105" data-date="2024-01-21">
                                                <div class="appointment break">
                                                    <small><i class="fas fa-utensils"></i> Lunch</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="12:00" data-doctor="DR106" data-date="2024-01-21">
                                                <div class="appointment break">
                                                    <small><i class="fas fa-utensils"></i> Lunch</small>
                                                </div>
                                            </td>
                                        </tr>
                                        <!-- Afternoon Schedule -->
                                        <tr>
                                            <td class="fw-bold time-column">1:00 PM</td>
                                            <td class="schedule-cell" data-time="13:00" data-doctor="DR101" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT018">
                                                    <small class="d-block">Thomas Anderson</small>
                                                    <small class="badge badge-sm type-badge followup">Follow-up</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="13:00" data-doctor="DR102" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT019">
                                                    <small class="d-block">Amanda Clark</small>
                                                    <small class="badge badge-sm type-badge checkup">Checkup</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="13:00" data-doctor="DR103" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT020">
                                                    <small class="d-block">Noah Rodriguez</small>
                                                    <small class="badge badge-sm type-badge emergency">Emergency</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="13:00" data-doctor="DR104" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT021">
                                                    <small class="d-block">Sophia Garcia</small>
                                                    <small class="badge badge-sm type-badge procedure">Procedure</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="13:00" data-doctor="DR105" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT022">
                                                    <small class="d-block">Liam Wilson</small>
                                                    <small class="badge badge-sm type-badge consultation">Consultation</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="13:00" data-doctor="DR106" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT023">
                                                    <small class="d-block">Emma Thompson</small>
                                                    <small class="badge badge-sm type-badge checkup">Checkup</small>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold time-column">2:00 PM</td>
                                            <td class="schedule-cell" data-time="14:00" data-doctor="DR101" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="14:00" data-doctor="DR102" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT024">
                                                    <small class="d-block">James Miller</small>
                                                    <small class="badge badge-sm type-badge followup">Follow-up</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="14:00" data-doctor="DR103" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="14:00" data-doctor="DR104" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT025">
                                                    <small class="d-block">Ava Davis</small>
                                                    <small class="badge badge-sm type-badge checkup">Checkup</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="14:00" data-doctor="DR105" data-date="2024-01-21">
                                                <div class="appointment cancelled">
                                                    <small class="d-block">John Carter</small>
                                                    <small class="badge badge-sm type-badge cancelled">Cancelled</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="14:00" data-doctor="DR106" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold time-column">3:00 PM</td>
                                            <td class="schedule-cell" data-time="15:00" data-doctor="DR101" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT026">
                                                    <small class="d-block">Robert Johnson</small>
                                                    <small class="badge badge-sm type-badge checkup">Checkup</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="15:00" data-doctor="DR102" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="15:00" data-doctor="DR103" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT027">
                                                    <small class="d-block">Charlotte White</small>
                                                    <small class="badge badge-sm type-badge followup">Follow-up</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="15:00" data-doctor="DR104" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT028">
                                                    <small class="d-block">Lucas Brown</small>
                                                    <small class="badge badge-sm type-badge emergency">Emergency</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="15:00" data-doctor="DR105" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="15:00" data-doctor="DR106" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT029">
                                                    <small class="d-block">Mia Anderson</small>
                                                    <small class="badge badge-sm type-badge consultation">Consultation</small>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold time-column">4:00 PM</td>
                                            <td class="schedule-cell" data-time="16:00" data-doctor="DR101" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="16:00" data-doctor="DR102" data-date="2024-01-21">
                                                <div class="appointment break">
                                                    <small><i class="fas fa-coffee"></i> Break</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="16:00" data-doctor="DR103" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="16:00" data-doctor="DR104" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT030">
                                                    <small class="d-block">Ethan Taylor</small>
                                                    <small class="badge badge-sm type-badge checkup">Checkup</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="16:00" data-doctor="DR105" data-date="2024-01-21">
                                                <div class="appointment booked" data-appointment="APT031">
                                                    <small class="d-block">Harper Martin</small>
                                                    <small class="badge badge-sm type-badge followup">Follow-up</small>
                                                </div>
                                            </td>
                                            <td class="schedule-cell" data-time="16:00" data-doctor="DR106" data-date="2024-01-21">
                                                <div class="appointment available" data-bs-toggle="tooltip" title="Click to book appointment">
                                                    <small>Available</small>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="mt-3 d-flex justify-content-between align-items-center">
                            <div>
                                <span class="badge bg-success me-2"><i class="fas fa-square"></i> Available</span>
                                <span class="badge bg-primary me-2"><i class="fas fa-square"></i> Booked</span>
                                <span class="badge bg-warning me-2"><i class="fas fa-square"></i> Break</span>
                                <span class="badge bg-danger me-2"><i class="fas fa-square"></i> Emergency</span>
                                <span class="badge bg-secondary me-2"><i class="fas fa-square"></i> Cancelled</span>
                                <span class="badge bg-info me-2"><i class="fas fa-square"></i> Follow-up</span>
                            </div>
                            <div class="text-muted">
                                Showing 6 doctors for Jan 21, 2024
                            </div>
                        </div>
                    </div>
                    
                    <!-- Weekly View -->
                    <div class="tab-pane fade" id="weekly" role="tabpanel" aria-labelledby="weekly-tab">
                        <div class="table-responsive">
                            <table class="table table-bordered table text-center">
                                <thead>
                                    <tr>
                                        <th class="time-column">Time / Day</th>
                                        <th>
                                            <div>Mon</div>
                                            <div class="small">Jan 15</div>
                                        </th>
                                        <th>
                                            <div>Tue</div>
                                            <div class="small">Jan 16</div>
                                        </th>
                                        <th>
                                            <div>Wed</div>
                                            <div class="small">Jan 17</div>
                                        </th>
                                        <th>
                                            <div>Thu</div>
                                            <div class="small">Jan 18</div>
                                        </th>
                                        <th>
                                            <div>Fri</div>
                                            <div class="small">Jan 19</div>
                                        </th>
                                        <th>
                                            <div>Sat</div>
                                            <div class="small">Jan 20</div>
                                            <span class="badge bg-warning badge-sm">Weekend</span>
                                        </th>
                                        <th>
                                            <div>Sun</div>
                                            <div class="small">Jan 21</div>
                                            <span class="badge bg-primary badge-sm">Today</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="fw-bold time-column">8:00 AM</td>
                                        <td class="weekly-cell" data-date="2024-01-15" data-time="08:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="3 appointment(s)">
                                                <span class="badge bg-primary">3</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-16" data-time="08:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="4 appointment(s)">
                                                <span class="badge bg-primary">4</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-17" data-time="08:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="2 appointment(s)">
                                                <span class="badge bg-primary">2</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-18" data-time="08:00">
                                            <span class="badge bg-success">Free</span>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-19" data-time="08:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="5 appointment(s)">
                                                <span class="badge bg-primary">5</span>
                                                <i class="fas fa-ambulance text-danger ms-1"></i>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-20" data-time="08:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="1 appointment(s)">
                                                <span class="badge bg-primary">1</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-21" data-time="08:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="4 appointment(s)">
                                                <span class="badge bg-primary">4</span>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="fw-bold time-column">9:00 AM</td>
                                        <td class="weekly-cell" data-date="2024-01-15" data-time="09:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="6 appointment(s)">
                                                <span class="badge bg-primary">6</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-16" data-time="09:00">
                                            <span class="badge bg-success">Free</span>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-17" data-time="09:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="3 appointment(s)">
                                                <span class="badge bg-primary">3</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-18" data-time="09:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="4 appointment(s)">
                                                <span class="badge bg-primary">4</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-19" data-time="09:00">
                                            <span class="badge bg-success">Free</span>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-20" data-time="09:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="2 appointment(s)">
                                                <span class="badge bg-primary">2</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-21" data-time="09:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="3 appointment(s)">
                                                <span class="badge bg-primary">3</span>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="fw-bold time-column">10:00 AM</td>
                                        <td class="weekly-cell" data-date="2024-01-15" data-time="10:00">
                                            <span class="badge bg-success">Free</span>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-16" data-time="10:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="5 appointment(s)">
                                                <span class="badge bg-primary">5</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-17" data-time="10:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="4 appointment(s)">
                                                <span class="badge bg-primary">4</span>
                                                <i class="fas fa-ambulance text-danger ms-1"></i>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-18" data-time="10:00">
                                            <span class="badge bg-success">Free</span>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-19" data-time="10:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="6 appointment(s)">
                                                <span class="badge bg-primary">6</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-20" data-time="10:00">
                                            <span class="badge bg-warning">Break</span>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-21" data-time="10:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="4 appointment(s)">
                                                <span class="badge bg-primary">4</span>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="fw-bold time-column">11:00 AM</td>
                                        <td class="weekly-cell" data-date="2024-01-15" data-time="11:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="7 appointment(s)">
                                                <span class="badge bg-primary">7</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-16" data-time="11:00">
                                            <span class="badge bg-success">Free</span>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-17" data-time="11:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="5 appointment(s)">
                                                <span class="badge bg-primary">5</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-18" data-time="11:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="6 appointment(s)">
                                                <span class="badge bg-primary">6</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-19" data-time="11:00">
                                            <span class="badge bg-warning">Break</span>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-20" data-time="11:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="3 appointment(s)">
                                                <span class="badge bg-primary">3</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-21" data-time="11:00">
                                            <span class="badge bg-success">Free</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="fw-bold time-column">1:00 PM</td>
                                        <td class="weekly-cell" data-date="2024-01-15" data-time="13:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="8 appointment(s)">
                                                <span class="badge bg-primary">8</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-16" data-time="13:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="6 appointment(s)">
                                                <span class="badge bg-primary">6</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-17" data-time="13:00">
                                            <span class="badge bg-warning">Break</span>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-18" data-time="13:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="7 appointment(s)">
                                                <span class="badge bg-primary">7</span>
                                                <i class="fas fa-ambulance text-danger ms-1"></i>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-19" data-time="13:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="5 appointment(s)">
                                                <span class="badge bg-primary">5</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-20" data-time="13:00">
                                            <span class="badge bg-success">Free</span>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-21" data-time="13:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="6 appointment(s)">
                                                <span class="badge bg-primary">6</span>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="fw-bold time-column">2:00 PM</td>
                                        <td class="weekly-cell" data-date="2024-01-15" data-time="14:00">
                                            <span class="badge bg-success">Free</span>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-16" data-time="14:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="4 appointment(s)">
                                                <span class="badge bg-primary">4</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-17" data-time="14:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="5 appointment(s)">
                                                <span class="badge bg-primary">5</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-18" data-time="14:00">
                                            <span class="badge bg-success">Free</span>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-19" data-time="14:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="6 appointment(s)">
                                                <span class="badge bg-primary">6</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-20" data-time="14:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="3 appointment(s)">
                                                <span class="badge bg-primary">3</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-21" data-time="14:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="4 appointment(s)">
                                                <span class="badge bg-primary">4</span>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="fw-bold time-column">3:00 PM</td>
                                        <td class="weekly-cell" data-date="2024-01-15" data-time="15:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="5 appointment(s)">
                                                <span class="badge bg-primary">5</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-16" data-time="15:00">
                                            <span class="badge bg-success">Free</span>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-17" data-time="15:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="4 appointment(s)">
                                                <span class="badge bg-primary">4</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-18" data-time="15:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="7 appointment(s)">
                                                <span class="badge bg-primary">7</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-19" data-time="15:00">
                                            <span class="badge bg-success">Free</span>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-20" data-time="15:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="2 appointment(s)">
                                                <span class="badge bg-primary">2</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-21" data-time="15:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="5 appointment(s)">
                                                <span class="badge bg-primary">5</span>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="fw-bold time-column">4:00 PM</td>
                                        <td class="weekly-cell" data-date="2024-01-15" data-time="16:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="3 appointment(s)">
                                                <span class="badge bg-primary">3</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-16" data-time="16:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="4 appointment(s)">
                                                <span class="badge bg-primary">4</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-17" data-time="16:00">
                                            <span class="badge bg-success">Free</span>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-18" data-time="16:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="5 appointment(s)">
                                                <span class="badge bg-primary">5</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-19" data-time="16:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="6 appointment(s)">
                                                <span class="badge bg-primary">6</span>
                                            </div>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-20" data-time="16:00">
                                            <span class="badge bg-warning">Break</span>
                                        </td>
                                        <td class="weekly-cell" data-date="2024-01-21" data-time="16:00">
                                            <div class="weekly-appointment" data-bs-toggle="tooltip" title="4 appointment(s)">
                                                <span class="badge bg-primary">4</span>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="row mt-3">
                            <div class="col-md-6">
                                <h6>Weekly Summary</h6>
                                <div class="row">
                                    <div class="col-6">
                                        <div class="card bg-light">
                                            <div class="card-body py-2">
                                                <small class="text-muted">Total Appointments</small>
                                                <h5 class="mb-0">187</h5>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="card bg-light">
                                            <div class="card-body py-2">
                                                <small class="text-muted">Available Slots</small>
                                                <h5 class="mb-0">42</h5>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <div class="card bg-light">
                                            <div class="card-body py-2">
                                                <small class="text-muted">Emergency Cases</small>
                                                <h5 class="mb-0 text-danger">8</h5>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <div class="card bg-light">
                                            <div class="card-body py-2">
                                                <small class="text-muted">Busiest Day</small>
                                                <h5 class="mb-0">Monday</h5>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h6>Doctor Availability This Week</h6>
                                <div class="availability-chart">
                                    <div class="doctor-availability mb-2">
                                        <div class="d-flex justify-content-between">
                                            <span>Dr. Sarah Johnson</span>
                                            <span class="badge bg-success">85%</span>
                                        </div>
                                        <div class="progress" style="height: 5px;">
                                            <div class="progress-bar bg-success" role="progressbar" style="width: 85%"></div>
                                        </div>
                                    </div>
                                    <div class="doctor-availability mb-2">
                                        <div class="d-flex justify-content-between">
                                            <span>Dr. Michael Chen</span>
                                            <span class="badge bg-success">78%</span>
                                        </div>
                                        <div class="progress" style="height: 5px;">
                                            <div class="progress-bar bg-success" role="progressbar" style="width: 78%"></div>
                                        </div>
                                    </div>
                                    <div class="doctor-availability mb-2">
                                        <div class="d-flex justify-content-between">
                                            <span>Dr. Anita Patel</span>
                                            <span class="badge bg-warning">65%</span>
                                        </div>
                                        <div class="progress" style="height: 5px;">
                                            <div class="progress-bar bg-warning" role="progressbar" style="width: 65%"></div>
                                        </div>
                                    </div>
                                    <div class="doctor-availability mb-2">
                                        <div class="d-flex justify-content-between">
                                            <span>Dr. James Williams</span>
                                            <span class="badge bg-success">82%</span>
                                        </div>
                                        <div class="progress" style="height: 5px;">
                                            <div class="progress-bar bg-success" role="progressbar" style="width: 82%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- By Doctor View -->
                    <div class="tab-pane fade" id="doctors" role="tabpanel" aria-labelledby="doctors-tab">
                        <div class="row" id="doctorCardsContainer">
                            <!-- Doctor 1 Card -->
                            <div class="col-lg-4 col-md-6 mb-4 doctor-card" data-department="cardiology">
                                <div class="card medical-border h-100">
                                    <div class="card-header">
                                        <div class="d-flex align-items-center">
                                            <img src="{% static 'images/doctors/doctor1.jpg' %}" alt="Dr. Sarah Johnson" class="rounded-circle me-2" width="40" height="40">
                                            <div>
                                                <h5 class="card-title mb-0">Dr. Sarah Johnson</h5>
                                                <small class="text-muted">Cardiology</small>
                                            </div>
                                            <div class="ms-auto">
                                                <span class="badge bg-success">Available</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <h6>Today's Schedule</h6>
                                        <div class="schedule-timeline">
                                            <div class="schedule-item confirmed">
                                                <span class="time">8:00 AM</span>
                                                <span class="patient">John Smith</span>
                                                <span class="badge badge-sm checkup">C</span>
                                            </div>
                                            <div class="schedule-item confirmed">
                                                <span class="time">8:30 AM</span>
                                                <span class="patient">John Smith</span>
                                                <span class="badge badge-sm checkup">C</span>
                                            </div>
                                            <div class="schedule-item free">
                                                <span class="time">9:00 AM</span>
                                                <span class="patient">Available</span>
                                            </div>
                                            <div class="schedule-item free">
                                                <span class="time">9:30 AM</span>
                                                <span class="patient">Available</span>
                                            </div>
                                            <div class="schedule-item confirmed">
                                                <span class="time">10:00 AM</span>
                                                <span class="patient">Jennifer Lee</span>
                                                <span class="badge badge-sm consultation">T</span>
                                            </div>
                                            <div class="schedule-item break">
                                                <span class="time">12:00 PM</span>
                                                <span class="patient">Lunch Break</span>
                                            </div>
                                            <div class="schedule-item confirmed">
                                                <span class="time">1:00 PM</span>
                                                <span class="patient">Thomas Anderson</span>
                                                <span class="badge badge-sm followup">F</span>
                                            </div>
                                        </div>
                                        <div class="mt-3 d-grid gap-2">
                                            <button class="btn btn-sm btn-outline-light schedule-btn" data-doctor="DR101">
                                                <i class="fas fa-calendar-plus me-1"></i> Schedule Appointment
                                            </button>
                                            <button class="btn btn-sm btn-outline-primary view-schedule-btn" data-doctor="DR101">
                                                <i class="fas fa-calendar-alt me-1"></i> View Full Schedule
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-footer bg-transparent">
                                        <small class="text-muted">
                                            <i class="fas fa-phone me-1"></i> (555) 123-4567 |
                                            <i class="fas fa-envelope me-1 ms-2"></i> sjohnson@cure...
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <!-- Doctor 2 Card -->
                            <div class="col-lg-4 col-md-6 mb-4 doctor-card" data-department="neurology">
                                <div class="card medical-border h-100">
                                    <div class="card-header">
                                        <div class="d-flex align-items-center">
                                            <img src="{% static 'images/doctors/doctor2.jpg' %}" alt="Dr. Michael Chen" class="rounded-circle me-2" width="40" height="40">
                                            <div>
                                                <h5 class="card-title mb-0">Dr. Michael Chen</h5>
                                                <small class="text-muted">Neurology</small>
                                            </div>
                                            <div class="ms-auto">
                                                <span class="badge bg-warning">Busy</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <h6>Today's Schedule</h6>
                                        <div class="schedule-timeline">
                                            <div class="schedule-item free">
                                                <span class="time">8:00 AM</span>
                                                <span class="patient">Available</span>
                                            </div>
                                            <div class="schedule-item emergency">
                                                <span class="time">8:30 AM</span>
                                                <span class="patient">Robert Davis</span>
                                                <span class="badge badge-sm emergency">E</span>
                                            </div>
                                            <div class="schedule-item emergency">
                                                <span class="time">9:00 AM</span>
                                                <span class="patient">Robert Davis</span>
                                                <span class="badge badge-sm emergency">E</span>
                                            </div>
                                            <div class="schedule-item free">
                                                <span class="time">9:30 AM</span>
                                                <span class="patient">Available</span>
                                            </div>
                                            <div class="schedule-item confirmed">
                                                <span class="time">10:00 AM</span>
                                                <span class="patient">William Brown</span>
                                                <span class="badge badge-sm checkup">C</span>
                                            </div>
                                            <div class="schedule-item break">
                                                <span class="time">12:00 PM</span>
                                                <span class="patient">Lunch Break</span>
                                            </div>
                                            <div class="schedule-item confirmed">
                                                <span class="time">1:00 PM</span>
                                                <span class="patient">Amanda Clark</span>
                                                <span class="badge badge-sm checkup">C</span>
                                            </div>
                                        </div>
                                        <div class="mt-3 d-grid gap-2">
                                            <button class="btn btn-sm btn-outline-light schedule-btn" data-doctor="DR102">
                                                <i class="fas fa-calendar-plus me-1"></i> Schedule Appointment
                                            </button>
                                            <button class="btn btn-sm btn-outline-primary view-schedule-btn" data-doctor="DR102">
                                                <i class="fas fa-calendar-alt me-1"></i> View Full Schedule
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-footer bg-transparent">
                                        <small class="text-muted">
                                            <i class="fas fa-phone me-1"></i> (555) 234-5678 |
                                            <i class="fas fa-envelope me-1 ms-2"></i> mchen@cure...
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <!-- Doctor 3 Card -->
                            <div class="col-lg-4 col-md-6 mb-4 doctor-card" data-department="pediatrics">
                                <div class="card medical-border h-100">
                                    <div class="card-header">
                                        <div class="d-flex align-items-center">
                                            <img src="{% static 'images/doctors/doctor3.jpg' %}" alt="Dr. Anita Patel" class="rounded-circle me-2" width="40" height="40">
                                            <div>
                                                <h5 class="card-title mb-0">Dr. Anita Patel</h5>
                                                <small class="text-muted">Pediatrics</small>
                                            </div>
                                            <div class="ms-auto">
                                                <span class="badge bg-success">Available</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <h6>Today's Schedule</h6>
                                        <div class="schedule-timeline">
                                            <div class="schedule-item confirmed">
                                                <span class="time">8:00 AM</span>
                                                <span class="patient">Emma Wilson</span>
                                                <span class="badge badge-sm followup">F</span>
                                            </div>
                                            <div class="schedule-item confirmed">
                                                <span class="time">8:30 AM</span>
                                                <span class="patient">Emma Wilson</span>
                                                <span class="badge badge-sm followup">F</span>
                                            </div>
                                            <div class="schedule-item free">
                                                <span class="time">9:00 AM</span>
                                                <span class="patient">Available</span>
                                            </div>
                                            <div class="schedule-item break">
                                                <span class="time">9:30 AM</span>
                                                <span class="patient">Coffee Break</span>
                                            </div>
                                            <div class="schedule-item break">
                                                <span class="time">10:00 AM</span>
                                                <span class="patient">Coffee Break</span>
                                            </div>
                                            <div class="schedule-item break">
                                                <span class="time">12:00 PM</span>
                                                <span class="patient">Lunch Break</span>
                                            </div>
                                            <div class="schedule-item emergency">
                                                <span class="time">1:00 PM</span>
                                                <span class="patient">Noah Rodriguez</span>
                                                <span class="badge badge-sm emergency">E</span>
                                            </div>
                                        </div>
                                        <div class="mt-3 d-grid gap-2">
                                            <button class="btn btn-sm btn-outline-light schedule-btn" data-doctor="DR103">
                                                <i class="fas fa-calendar-plus me-1"></i> Schedule Appointment
                                            </button>
                                            <button class="btn btn-sm btn-outline-primary view-schedule-btn" data-doctor="DR103">
                                                <i class="fas fa-calendar-alt me-1"></i> View Full Schedule
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-footer bg-transparent">
                                        <small class="text-muted">
                                            <i class="fas fa-phone me-1"></i> (555) 345-6789 |
                                            <i class="fas fa-envelope me-1 ms-2"></i> apatel@cure...
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Grid View -->
                    <div class="tab-pane fade" id="grid" role="tabpanel" aria-labelledby="grid-tab">
                        <div class="row g-3">
                            <!-- Doctor 1 Grid -->
                            <div class="col-xl-3 col-lg-4 col-md-6">
                                <div class="card medical-border h-100">
                                    <div class="card-body text-center">
                                        <img src="{% static 'images/doctors/doctor1.jpg' %}" alt="Dr. Sarah Johnson" class="rounded-circle mb-3" width="80" height="80">
                                        <h5>Dr. Sarah Johnson</h5>
                                        <p class="text-muted">Cardiology</p>
                                        
                                        <div class="doctor-stats mb-3">
                                            <div class="row text-center">
                                                <div class="col-4">
                                                    <div class="stat-number">7</div>
                                                    <small class="text-muted">Today</small>
                                                </div>
                                                <div class="col-4">
                                                    <div class="stat-number">42</div>
                                                    <small class="text-muted">This Week</small>
                                                </div>
                                                <div class="col-4">
                                                    <div class="stat-number">85%</div>
                                                    <small class="text-muted">Available</small>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-sm btn-success schedule-btn" data-doctor="DR101">
                                                <i class="fas fa-calendar-plus me-1"></i> Book Now
                                            </button>
                                            <button class="btn btn-sm btn-outline-light view-schedule-btn" data-doctor="DR101">
                                                View Schedule
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Doctor 2 Grid -->
                            <div class="col-xl-3 col-lg-4 col-md-6">
                                <div class="card medical-border h-100">
                                    <div class="card-body text-center">
                                        <img src="{% static 'images/doctors/doctor2.jpg' %}" alt="Dr. Michael Chen" class="rounded-circle mb-3" width="80" height="80">
                                        <h5>Dr. Michael Chen</h5>
                                        <p class="text-muted">Neurology</p>
                                        
                                        <div class="doctor-stats mb-3">
                                            <div class="row text-center">
                                                <div class="col-4">
                                                    <div class="stat-number">6</div>
                                                    <small class="text-muted">Today</small>
                                                </div>
                                                <div class="col-4">
                                                    <div class="stat-number">38</div>
                                                    <small class="text-muted">This Week</small>
                                                </div>
                                                <div class="col-4">
                                                    <div class="stat-number">78%</div>
                                                    <small class="text-muted">Available</small>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-sm btn-success schedule-btn" data-doctor="DR102">
                                                <i class="fas fa-calendar-plus me-1"></i> Book Now
                                            </button>
                                            <button class="btn btn-sm btn-outline-light view-schedule-btn" data-doctor="DR102">
                                                View Schedule
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Doctor 3 Grid -->
                            <div class="col-xl-3 col-lg-4 col-md-6">
                                <div class="card medical-border h-100">
                                    <div class="card-body text-center">
                                        <img src="{% static 'images/doctors/doctor3.jpg' %}" alt="Dr. Anita Patel" class="rounded-circle mb-3" width="80" height="80">
                                        <h5>Dr. Anita Patel</h5>
                                        <p class="text-muted">Pediatrics</p>
                                        
                                        <div class="doctor-stats mb-3">
                                            <div class="row text-center">
                                                <div class="col-4">
                                                    <div class="stat-number">5</div>
                                                    <small class="text-muted">Today</small>
                                                </div>
                                                <div class="col-4">
                                                    <div class="stat-number">32</div>
                                                    <small class="text-muted">This Week</small>
                                                </div>
                                                <div class="col-4">
                                                    <div class="stat-number">65%</div>
                                                    <small class="text-muted">Available</small>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-sm btn-success schedule-btn" data-doctor="DR103">
                                                <i class="fas fa-calendar-plus me-1"></i> Book Now
                                            </button>
                                            <button class="btn btn-sm btn-outline-light view-schedule-btn" data-doctor="DR103">
                                                View Schedule
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Doctor 4 Grid -->
                            <div class="col-xl-3 col-lg-4 col-md-6">
                                <div class="card medical-border h-100">
                                    <div class="card-body text-center">
                                        <img src="{% static 'images/doctors/doctor4.jpg' %}" alt="Dr. James Williams" class="rounded-circle mb-3" width="80" height="80">
                                        <h5>Dr. James Williams</h5>
                                        <p class="text-muted">Orthopedics</p>
                                        
                                        <div class="doctor-stats mb-3">
                                            <div class="row text-center">
                                                <div class="col-4">
                                                    <div class="stat-number">8</div>
                                                    <small class="text-muted">Today</small>
                                                </div>
                                                <div class="col-4">
                                                    <div class="stat-number">45</div>
                                                    <small class="text-muted">This Week</small>
                                                </div>
                                                <div class="col-4">
                                                    <div class="stat-number">82%</div>
                                                    <small class="text-muted">Available</small>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-sm btn-success schedule-btn" data-doctor="DR104">
                                                <i class="fas fa-calendar-plus me-1"></i> Book Now
                                            </button>
                                            <button class="btn btn-sm btn-outline-light view-schedule-btn" data-doctor="DR104">
                                                View Schedule
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Appointment Detail Modal -->
<div class="modal fade" id="appointmentDetailModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Appointment Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="appointmentDetailContent">
                <!-- Content loaded via JavaScript -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="editAppointmentBtn">Edit</button>
                <button type="button" class="btn btn-danger" id="cancelAppointmentBtn">Cancel</button>
                <button type="button" class="btn btn-success" id="completeAppointmentBtn">Mark Complete</button>
            </div>
        </div>
    </div>
</div>

<!-- Import Modal -->
<div class="modal fade" id="importModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Import Schedules</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="importForm">
                    <div class="mb-3">
                        <label for="importFile" class="form-label">Select File</label>
                        <input type="file" class="form-control" id="importFile" accept=".csv,.xlsx,.xls">
                        <div class="form-text">Supported formats: CSV, Excel (.xlsx, .xls)</div>
                    </div>
                    <div class="mb-3">
                        <label for="importType" class="form-label">Import Type</label>
                        <select class="form-select" id="importType">
                            <option value="appointments">Appointments Only</option>
                            <option value="schedules">Doctor Schedules</option>
                            <option value="both">Both Appointments & Schedules</option>
                        </select>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="overwriteExisting">
                        <label class="form-check-label" for="overwriteExisting">
                            Overwrite existing appointments on conflict
                        </label>
                    </div>
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>
                        Download the <a href="#" id="downloadTemplate">template file</a> for proper formatting
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="startImport">Import</button>
            </div>
        </div>
    </div>
</div>

<style>
    /* Custom Styles */
    .table th {
        border-top: none;
        border-bottom: 2px solid var(--med-primary);
        font-weight: 600;
        background-color: rgba(var(--med-primary-rgb), 0.05);
    }
    
    /* Daily View with Scroll */
    .doctor-scroll-container {
        overflow-x: auto;
        max-width: 100%;
        border: 1px solid #dee2e6;
        border-radius: 4px;
    }
    
    .doctor-column {
        min-width: 180px;
    }
    
    .time-column {
        min-width: 100px;
        position: sticky;
        left: 0;
        background: white;
        z-index: 1;
    }
    
    .doctor-header {
        display: flex;
        align-items: center;
        padding: 5px;
    }
    
    /* Appointment Styles */
    .schedule-cell {
        cursor: pointer;
        position: relative;
        height: 60px;
        vertical-align: middle;
        transition: all 0.2s;
    }
    
    .schedule-cell:hover {
        background-color: rgba(var(--med-primary-rgb), 0.05);
    }
    
    .appointment {
        padding: 6px;
        border-radius: 4px;
        text-align: center;
        font-size: 0.85rem;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        border-left: 4px solid;
        transition: transform 0.2s;
    }
    
    .appointment:hover {
        transform: translateY(-2px);
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    /* Appointment Type Colors */
    .appointment.available {
        background-color: rgba(46, 204, 113, 0.15);
        border-left-color: #2ecc71;
        color: #27ae60;
    }
    
    .appointment.booked {
        background-color: rgba(52, 152, 219, 0.15);
        border-left-color: #3498db;
        color: #2980b9;
    }
    
    .appointment.emergency {
        background-color: rgba(231, 76, 60, 0.2);
        border-left-color: #e74c3c;
        color: #c0392b;
        font-weight: bold;
    }
    
    .appointment.cancelled {
        background-color: rgba(149, 165, 166, 0.2);
        border-left-color: #95a5a6;
        color: #7f8c8d;
        text-decoration: line-through;
    }
    
    .appointment.break {
        background-color: rgba(243, 156, 18, 0.15);
        border-left-color: #f39c12;
        color: #d35400;
    }
    
    .appointment.followup {
        background-color: rgba(155, 89, 182, 0.15);
        border-left-color: #9b59b6;
        color: #8e44ad;
    }
    
    .appointment.procedure {
        background-color: rgba(230, 126, 34, 0.15);
        border-left-color: #e67e22;
        color: #d35400;
    }
    
    /* Type badges */
    .type-badge {
        font-size: 0.7rem;
        padding: 2px 5px;
        margin-top: 2px;
        display: inline-block;
        color: white;
        border-radius: 3px;
    }
    
    .type-badge.checkup { background-color: #3498db; }
    .type-badge.followup { background-color: #9b59b6; }
    .type-badge.emergency { background-color: #e74c3c; }
    .type-badge.consultation { background-color: #1abc9c; }
    .type-badge.procedure { background-color: #e67e22; }
    .type-badge.cancelled { background-color: #95a5a6; }
    
    /* Schedule Timeline */
    .schedule-timeline {
        border-left: 3px solid var(--med-primary);
        padding-left: 15px;
        max-height: 300px;
        overflow-y: auto;
    }
    
    .schedule-item {
        padding: 8px 0;
        margin-bottom: 5px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #eee;
    }
    
    .schedule-item:last-child {
        border-bottom: none;
    }
    
    .schedule-item .time {
        font-weight: bold;
        width: 80px;
        color: #666;
    }
    
    .schedule-item .patient {
        flex-grow: 1;
        margin: 0 10px;
    }
    
    .schedule-item.confirmed { color: #3498db; }
    .schedule-item.emergency { color: #e74c3c; }
    .schedule-item.free { color: #2ecc71; }
    .schedule-item.break { color: #f39c12; }
    
    /* Weekly View */
    .weekly-cell {
        cursor: pointer;
        height: 50px;
        vertical-align: middle;
    }
    
    .weekly-appointment {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        background-color: rgba(52, 152, 219, 0.1);
        border: 1px solid rgba(52, 152, 219, 0.3);
    }
    
    /* Progress bars */
    .doctor-availability .progress {
        background-color: #ecf0f1;
    }
    
    /* Stats */
    .stat-number {
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--med-primary);
    }
    
    /* Nav Tabs */
    .nav-tabs .nav-link {
        color: #666;
        border: none;
        padding: 10px 20px;
    }
    
    .nav-tabs .nav-link:hover {
        color: var(--med-primary);
    }
    
    .nav-tabs .nav-link.active {
        color: var(--med-primary);
        background: transparent;
        border-bottom: 3px solid var(--med-primary);
        font-weight: 600;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
        .doctor-column {
            min-width: 150px;
        }
        
        .time-column {
            min-width: 80px;
        }
        
        .nav-tabs .nav-link {
            padding: 8px 12px;
            font-size: 0.9rem;
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize tooltips
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
        
        // Date navigation (Only forward)
        const datePicker = document.getElementById('datePicker');
        const nextDayBtn = document.getElementById('nextDay');
        const nextWeekBtn = document.getElementById('nextWeek');
        const todayBtn = document.getElementById('todayBtn');
        const scheduleDate = document.getElementById('scheduleDate');
        
        // Set min date to today
        const today = new Date();
        const todayString = today.toISOString().split('T')[0];
        datePicker.min = todayString;
        
        // Set max date (3 months from now)
        const maxDate = new Date();
        maxDate.setMonth(maxDate.getMonth() + 3);
        datePicker.max = maxDate.toISOString().split('T')[0];
        
        function updateDateDisplay() {
            const selectedDate = new Date(datePicker.value);
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            scheduleDate.textContent = selectedDate.toLocaleDateString('en-US', options);
        }
        
        function addDays(date, days) {
            const result = new Date(date);
            result.setDate(result.getDate() + days);
            return result;
        }
        
        nextDayBtn.addEventListener('click', function() {
            const currentDate = new Date(datePicker.value);
            const nextDate = addDays(currentDate, 1);
            
            // Check if next date is within max range
            if (nextDate <= new Date(datePicker.max)) {
                datePicker.value = nextDate.toISOString().split('T')[0];
                updateDateDisplay();
            } else {
                Swal.fire({
                    icon: 'warning',
                    title: 'Date Limit Reached',
                    text: 'You can only schedule up to 3 months in advance.',
                    confirmButtonColor: 'var(--med-primary)'
                });
            }
        });
        
        nextWeekBtn.addEventListener('click', function() {
            const currentDate = new Date(datePicker.value);
            const nextWeekDate = addDays(currentDate, 7);
            
            if (nextWeekDate <= new Date(datePicker.max)) {
                datePicker.value = nextWeekDate.toISOString().split('T')[0];
                updateDateDisplay();
            } else {
                Swal.fire({
                    icon: 'warning',
                    title: 'Date Limit Reached',
                    text: 'You can only schedule up to 3 months in advance.',
                    confirmButtonColor: 'var(--med-primary)'
                });
            }
        });
        
        todayBtn.addEventListener('click', function() {
            datePicker.value = todayString;
            updateDateDisplay();
        });
        
        datePicker.addEventListener('change', updateDateDisplay);
        
        // Initialize date display
        updateDateDisplay();
        
        // Doctor filter
        const doctorFilter = document.getElementById('doctorFilter');
        doctorFilter.addEventListener('change', function() {
            const doctorId = this.value;
            const doctorCards = document.querySelectorAll('.doctor-card');
            
            if (doctorId === 'all') {
                doctorCards.forEach(card => card.style.display = 'block');
            } else {
                // In real app, filter based on doctor ID
                // For demo, just show all
                doctorCards.forEach(card => card.style.display = 'block');
            }
        });
        
        // Additional filters
        const departmentFilter = document.getElementById('departmentFilter');
        const appointmentTypeFilter = document.getElementById('appointmentTypeFilter');
        const statusFilter = document.getElementById('statusFilter');
        const searchPatient = document.getElementById('searchPatient');
        
        function applyFilters() {
            const department = departmentFilter.value;
            const appointmentType = appointmentTypeFilter.value;
            const status = statusFilter.value;
            const searchTerm = searchPatient.value.toLowerCase();
            
            // Filter doctor cards
            document.querySelectorAll('.doctor-card').forEach(card => {
                const cardDept = card.getAttribute('data-department');
                const showCard = (!department || cardDept === department);
                card.style.display = showCard ? 'block' : 'none';
            });
            
            // Filter appointments in daily view
            document.querySelectorAll('.appointment').forEach(appointment => {
                const appointmentTypeClass = appointment.querySelector('.type-badge');
                const appointmentType = appointmentTypeClass ? appointmentTypeClass.classList[1] : '';
                const patientName = appointment.textContent.toLowerCase();
                
                let showAppointment = true;
                
                if (appointmentTypeFilter.value && appointmentType !== appointmentTypeFilter.value) {
                    showAppointment = false;
                }
                
                if (searchTerm && !patientName.includes(searchTerm)) {
                    showAppointment = false;
                }
                
                appointment.parentElement.style.display = showAppointment ? 'table-cell' : 'none';
            });
        }
        
        [departmentFilter, appointmentTypeFilter, statusFilter, searchPatient].forEach(filter => {
            filter.addEventListener('change', applyFilters);
        });
        
        searchPatient.addEventListener('input', applyFilters);
        
        // Schedule cell click handler - Show appointment details
        document.addEventListener('click', function(e) {
            const scheduleCell = e.target.closest('.schedule-cell');
            if (scheduleCell) {
                const appointmentDiv = scheduleCell.querySelector('.appointment');
                const appointmentId = appointmentDiv?.getAttribute('data-appointment');
                
                if (appointmentId) {
                    // Show appointment details
                    showAppointmentDetails(appointmentId, scheduleCell);
                } else if (appointmentDiv?.classList.contains('available')) {
                    // Book new appointment
                    bookNewAppointment(scheduleCell);
                }
            }
            
            // Weekly cell click
            const weeklyCell = e.target.closest('.weekly-cell');
            if (weeklyCell) {
                const date = weeklyCell.getAttribute('data-date');
                const time = weeklyCell.getAttribute('data-time');
                
                // Switch to daily view for that date
                datePicker.value = date;
                updateDateDisplay();
                
                // Switch to daily tab
                const dailyTab = document.getElementById('daily-tab');
                const tabInstance = new bootstrap.Tab(dailyTab);
                tabInstance.show();
                
                // Scroll to time slot
                setTimeout(() => {
                    const timeCell = document.querySelector(`.schedule-cell[data-time="${time}"]`);
                    if (timeCell) {
                        timeCell.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        timeCell.classList.add('highlight-cell');
                        setTimeout(() => timeCell.classList.remove('highlight-cell'), 2000);
                    }
                }, 500);
            }
        });
        
        // Show appointment details
        function showAppointmentDetails(appointmentId, cell) {
            const modal = new bootstrap.Modal(document.getElementById('appointmentDetailModal'));
            const content = document.getElementById('appointmentDetailContent');
            
            // Get appointment data from the cell
            const doctor = cell.getAttribute('data-doctor');
            const time = cell.getAttribute('data-time');
            const date = cell.getAttribute('data-date');
            const appointmentDiv = cell.querySelector('.appointment');
            const patientName = appointmentDiv.querySelector('small').textContent;
            const appointmentType = appointmentDiv.querySelector('.type-badge')?.textContent || 'Checkup';
            
            // Create appointment details
            content.innerHTML = `
                <div class="row">
                    <div class="col-md-6">
                        <h6>Appointment Information</h6>
                        <table class="table table-sm">
                            <tr><th>Patient:</th><td>${patientName}</td></tr>
                            <tr><th>Doctor:</th><td>${getDoctorName(doctor)}</td></tr>
                            <tr><th>Date & Time:</th><td>${formatDate(date)} ${formatTime(time)}</td></tr>
                            <tr><th>Type:</th><td><span class="badge ${getAppointmentBadgeClass(appointmentType)}">${appointmentType}</span></td></tr>
                            <tr><th>Status:</th><td><span class="badge bg-success">Confirmed</span></td></tr>
                            <tr><th>Duration:</th><td>30 minutes</td></tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <h6>Patient Information</h6>
                        <table class="table table-sm">
                            <tr><th>Age:</th><td>${getRandomAge()}</td></tr>
                            <tr><th>Gender:</th><td>${getRandomGender()}</td></tr>
                            <tr><th>Phone:</th><td>${getRandomPhone()}</td></tr>
                            <tr><th>Email:</th><td>${patientName.toLowerCase().replace(' ', '.')}@example.com</td></tr>
                            <tr><th>Insurance:</th><td>${getRandomInsurance()}</td></tr>
                            <tr><th>Last Visit:</th><td>${getRandomLastVisit()}</td></tr>
                        </table>
                    </div>
                </div>
                <div class="mt-3">
                    <h6>Notes</h6>
                    <p class="bg-light p-3 rounded">${getAppointmentNotes(appointmentType)}</p>
                </div>
            `;
            
            modal.show();
        }
        
        // Helper functions for appointment details
        function getDoctorName(doctorId) {
            const doctors = {
                'DR101': 'Dr. Sarah Johnson',
                'DR102': 'Dr. Michael Chen',
                'DR103': 'Dr. Anita Patel',
                'DR104': 'Dr. James Williams',
                'DR105': 'Dr. Emily Rodriguez',
                'DR106': 'Dr. Robert Kim'
            };
            return doctors[doctorId] || 'Doctor';
        }
        
        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
        }
        
        function formatTime(timeStr) {
            const [hours, minutes] = timeStr.split(':');
            const hour = parseInt(hours);
            const ampm = hour >= 12 ? 'PM' : 'AM';
            const hour12 = hour % 12 || 12;
            return `${hour12}:${minutes} ${ampm}`;
        }
        
        function getAppointmentBadgeClass(type) {
            const classes = {
                'Checkup': 'bg-primary',
                'Follow-up': 'bg-info',
                'Emergency': 'bg-danger',
                'Consultation': 'bg-success',
                'Procedure': 'bg-warning',
                'Cancelled': 'bg-secondary'
            };
            return classes[type] || 'bg-primary';
        }
        
        function getRandomAge() {
            return Math.floor(Math.random() * 50) + 20;
        }
        
        function getRandomGender() {
            return Math.random() > 0.5 ? 'Male' : 'Female';
        }
        
        function getRandomPhone() {
            return `(${Math.floor(Math.random() * 900) + 100}) ${Math.floor(Math.random() * 900) + 100}-${Math.floor(Math.random() * 9000) + 1000}`;
        }
        
        function getRandomInsurance() {
            const insurances = ['Blue Cross', 'Aetna', 'UnitedHealth', 'Cigna', 'Humana'];
            return insurances[Math.floor(Math.random() * insurances.length)];
        }
        
        function getRandomLastVisit() {
            const daysAgo = Math.floor(Math.random() * 90) + 1;
            const date = new Date();
            date.setDate(date.getDate() - daysAgo);
            return date.toISOString().split('T')[0];
        }
        
        function getAppointmentNotes(type) {
            const notes = {
                'Checkup': 'Regular health checkup. Patient reports feeling well. Blood pressure and heart rate within normal ranges.',
                'Follow-up': 'Follow-up appointment to monitor progress after previous treatment. Patient reports improvement in symptoms.',
                'Emergency': 'Emergency consultation. Patient presenting with acute symptoms requiring immediate attention.',
                'Consultation': 'Initial consultation to discuss treatment options and develop care plan.',
                'Procedure': 'Scheduled procedure. Pre-op instructions provided. Patient confirmed understanding of procedure risks and benefits.'
            };
            return notes[type] || 'Regular appointment.';
        }
        
        // Book new appointment
        function bookNewAppointment(cell) {
            const doctorId = cell.getAttribute('data-doctor');
            const time = cell.getAttribute('data-time');
            const date = cell.getAttribute('data-date');
            const doctorName = getDoctorName(doctorId);
            const formattedTime = formatTime(time);
            const formattedDate = formatDate(date);
            
            Swal.fire({
                title: 'Schedule New Appointment',
                html: `
                    <form id="newAppointmentForm">
                        <div class="mb-3">
                            <label class="form-label">Doctor</label>
                            <input type="text" class="form-control" value="${doctorName}" readonly>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Date & Time</label>
                            <input type="text" class="form-control" value="${formattedDate} at ${formattedTime}" readonly>
                        </div>
                        <div class="mb-3">
                            <label for="patientSelect" class="form-label">Patient</label>
                            <select class="form-select" id="patientSelect" required>
                                <option value="">Select Patient</option>
                                <option value="1">John Smith (ID: PT001)</option>
                                <option value="2">Emma Wilson (ID: PT002)</option>
                                <option value="3">Michael Taylor (ID: PT003)</option>
                                <option value="4">Jennifer Lee (ID: PT004)</option>
                                <option value="5">Robert Davis (ID: PT005)</option>
                                <option value="new">+ Add New Patient</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="appointmentType" class="form-label">Appointment Type</label>
                            <select class="form-select" id="appointmentType" required>
                                <option value="checkup">Regular Checkup</option>
                                <option value="followup">Follow-up</option>
                                <option value="emergency">Emergency</option>
                                <option value="consultation">Consultation</option>
                                <option value="procedure">Procedure</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="appointmentNotes" class="form-label">Notes</label>
                            <textarea class="form-control" id="appointmentNotes" rows="2" placeholder="Additional notes..."></textarea>
                        </div>
                        <div class="form-check mb-3">
                            <input type="checkbox" class="form-check-input" id="sendReminder" checked>
                            <label class="form-check-label" for="sendReminder">Send reminder to patient</label>
                        </div>
                    </form>
                `,
                showCancelButton: true,
                confirmButtonText: 'Schedule Appointment',
                cancelButtonText: 'Cancel',
                confirmButtonColor: 'var(--med-primary)',
                preConfirm: () => {
                    const patient = document.getElementById('patientSelect').value;
                    if (!patient) {
                        Swal.showValidationMessage('Please select a patient');
                        return false;
                    }
                    return {
                        patient: document.getElementById('patientSelect').selectedOptions[0].text,
                        type: document.getElementById('appointmentType').value,
                        notes: document.getElementById('appointmentNotes').value,
                        reminder: document.getElementById('sendReminder').checked
                    };
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    // Show success message
                    Swal.fire({
                        icon: 'success',
                        title: 'Appointment Scheduled!',
                        html: `
                            <p>Appointment booked successfully!</p>
                            <div class="text-start">
                                <p><strong>Doctor:</strong> ${doctorName}</p>
                                <p><strong>Time:</strong> ${formattedDate} at ${formattedTime}</p>
                                <p><strong>Patient:</strong> ${result.value.patient}</p>
                                <p><strong>Type:</strong> ${result.value.type}</p>
                            </div>
                        `,
                        confirmButtonColor: 'var(--med-primary)'
                    }).then(() => {
                        // Update the cell to show booked appointment
                        const appointmentDiv = cell.querySelector('.appointment');
                        appointmentDiv.className = 'appointment booked';
                        appointmentDiv.innerHTML = `
                            <small class="d-block">${result.value.patient.split(' (')[0]}</small>
                            <small class="badge badge-sm type-badge ${result.value.type}">${result.value.type.charAt(0).toUpperCase() + result.value.type.slice(1)}</small>
                        `;
                        appointmentDiv.setAttribute('data-appointment', 'APT' + Math.floor(Math.random() * 1000));
                    });
                }
            });
        }
        
        // Export functionality
        document.querySelectorAll('.export-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                const format = this.getAttribute('data-format');
                const date = datePicker.value;
                const doctorId = doctorFilter.value;
                
                Swal.fire({
                    title: 'Exporting...',
                    html: 'Please wait while we generate your file.',
                    allowOutsideClick: false,
                    didOpen: () => {
                        Swal.showLoading();
                        
                        // Simulate export process
                        setTimeout(() => {
                            Swal.close();
                            Swal.fire({
                                icon: 'success',
                                title: 'Export Complete!',
                                text: `Schedule exported as ${format.toUpperCase()}`,
                                confirmButtonColor: 'var(--med-primary)'
                            }).then(() => {
                                // Create and trigger download
                                const blob = new Blob(['Sample exported data'], { type: 'text/plain' });
                                const url = window.URL.createObjectURL(blob);
                                const a = document.createElement('a');
                                a.href = url;
                                a.download = `doctor-schedule-${date}.${format}`;
                                document.body.appendChild(a);
                                a.click();
                                document.body.removeChild(a);
                                window.URL.revokeObjectURL(url);
                            });
                        }, 1500);
                    }
                });
            });
        });
        
        // Import functionality
        document.getElementById('importSchedule').addEventListener('click', function(e) {
            e.preventDefault();
            const importModal = new bootstrap.Modal(document.getElementById('importModal'));
            importModal.show();
        });
        
        document.getElementById('startImport').addEventListener('click', function() {
            const fileInput = document.getElementById('importFile');
            const importType = document.getElementById('importType').value;
            const overwrite = document.getElementById('overwriteExisting').checked;
            
            if (!fileInput.files.length) {
                Swal.fire({
                    icon: 'error',
                    title: 'No File Selected',
                    text: 'Please select a file to import.',
                    confirmButtonColor: 'var(--med-primary)'
                });
                return;
            }
            
            Swal.fire({
                title: 'Importing...',
                html: 'Please wait while we process your file.',
                allowOutsideClick: false,
                didOpen: () => {
                    Swal.showLoading();
                    
                    // Simulate import process
                    setTimeout(() => {
                        Swal.close();
                        Swal.fire({
                            icon: 'success',
                            title: 'Import Complete!',
                            text: '12 appointments imported successfully.',
                            confirmButtonColor: 'var(--med-primary)'
                        }).then(() => {
                            bootstrap.Modal.getInstance(document.getElementById('importModal')).hide();
                        });
                    }, 2000);
                }
            });
        });
        
        // Download template
        document.getElementById('downloadTemplate').addEventListener('click', function(e) {
            e.preventDefault();
            // Create template content
            const templateContent = `Doctor ID,Patient Name,Date,Time,Appointment Type,Notes\nDR101,John Doe,2024-01-22,09:00,checkup,Regular checkup\nDR102,Jane Smith,2024-01-22,10:30,followup,Follow-up appointment`;
            const blob = new Blob([templateContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'schedule-import-template.csv';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        });
        
        // Print schedule
        document.getElementById('printSchedule').addEventListener('click', function() {
            const printContent = document.querySelector('.card.medical-border').innerHTML;
            const originalContent = document.body.innerHTML;
            
            document.body.innerHTML = `
                <div class="container mt-4">
                    <h2 class="mb-3">Doctor Schedule - ${datePicker.value}</h2>
                    ${printContent}
                </div>
            `;
            
            window.print();
            document.body.innerHTML = originalContent;
            location.reload();
        });
        
        // Schedule buttons
        document.querySelectorAll('.schedule-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const doctorId = this.getAttribute('data-doctor');
                // Find an available time slot for this doctor
                const availableCell = document.querySelector(`.schedule-cell[data-doctor="${doctorId}"] .appointment.available`);
                if (availableCell) {
                    const cell = availableCell.closest('.schedule-cell');
                    bookNewAppointment(cell);
                } else {
                    Swal.fire({
                        icon: 'info',
                        title: 'No Available Slots',
                        text: 'This doctor has no available time slots today.',
                        confirmButtonColor: 'var(--med-primary)'
                    });
                }
            });
        });
        
        // New schedule button
        document.getElementById('newScheduleBtn').addEventListener('click', function(e) {
            e.preventDefault();
            Swal.fire({
                title: 'Create New Schedule',
                html: `
                    <form id="newScheduleForm">
                        <div class="mb-3">
                            <label for="scheduleDoctor" class="form-label">Select Doctor</label>
                            <select class="form-select" id="scheduleDoctor" required>
                                <option value="">Choose doctor...</option>
                                <option value="DR101">Dr. Sarah Johnson - Cardiology</option>
                                <option value="DR102">Dr. Michael Chen - Neurology</option>
                                <option value="DR103">Dr. Anita Patel - Pediatrics</option>
                                <option value="DR104">Dr. James Williams - Orthopedics</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="scheduleDateRange" class="form-label">Date Range</label>
                            <input type="text" class="form-control" id="scheduleDateRange" placeholder="Select date range" readonly>
                        </div>
                        <div class="mb-3">
                            <label for="schedulePattern" class="form-label">Schedule Pattern</label>
                            <select class="form-select" id="schedulePattern" required>
                                <option value="daily">Daily (Monday-Friday)</option>
                                <option value="weekly">Weekly (Specific days)</option>
                                <option value="custom">Custom Pattern</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="workingHours" class="form-label">Working Hours</label>
                            <div class="row">
                                <div class="col-6">
                                    <input type="time" class="form-control" id="startTime" value="08:00" required>
                                </div>
                                <div class="col-6">
                                    <input type="time" class="form-control" id="endTime" value="17:00" required>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="appointmentDuration" class="form-label">Appointment Duration</label>
                            <select class="form-select" id="appointmentDuration">
                                <option value="15">15 minutes</option>
                                <option value="30" selected>30 minutes</option>
                                <option value="45">45 minutes</option>
                                <option value="60">60 minutes</option>
                            </select>
                        </div>
                    </form>
                `,
                showCancelButton: true,
                confirmButtonText: 'Create Schedule',
                cancelButtonText: 'Cancel',
                confirmButtonColor: 'var(--med-primary)',
                width: 600,
                preConfirm: () => {
                    const doctor = document.getElementById('scheduleDoctor').value;
                    if (!doctor) {
                        Swal.showValidationMessage('Please select a doctor');
                        return false;
                    }
                    return {
                        doctor: doctor,
                        startTime: document.getElementById('startTime').value,
                        endTime: document.getElementById('endTime').value,
                        duration: document.getElementById('appointmentDuration').value
                    };
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Schedule Created!',
                        text: 'New schedule has been created successfully.',
                        confirmButtonColor: 'var(--med-primary)'
                    });
                }
            });
        });
        
        // View type switching
        document.querySelectorAll('[data-view]').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const viewType = this.getAttribute('data-view');
                
                // Update active state
                document.querySelectorAll('[data-view]').forEach(i => i.classList.remove('active'));
                this.classList.add('active');
                
                // Update view type dropdown text
                document.getElementById('viewTypeDropdown').innerHTML = 
                    `<i class="fas fa-eye me-1"></i> ${this.textContent}`;
                
                // Handle view switching
                switch(viewType) {
                    case 'weekly':
                        // Switch to weekly tab
                        const weeklyTab = document.getElementById('weekly-tab');
                        const weeklyTabInstance = new bootstrap.Tab(weeklyTab);
                        weeklyTabInstance.show();
                        break;
                    case 'monthly':
                        // Not implemented yet
                        Swal.fire({
                            icon: 'info',
                            title: 'Monthly View',
                            text: 'Monthly view will be available in the next update.',
                            confirmButtonColor: 'var(--med-primary)'
                        });
                        break;
                    default:
                        // Switch to daily tab
                        const dailyTab = document.getElementById('daily-tab');
                        const dailyTabInstance = new bootstrap.Tab(dailyTab);
                        dailyTabInstance.show();
                }
            });
        });
        
        // Add highlight animation style
        const style = document.createElement('style');
        style.textContent = `
            .highlight-cell {
                animation: highlight 2s ease;
                background-color: rgba(var(--med-primary-rgb), 0.1) !important;
            }
            
            @keyframes highlight {
                0% { background-color: rgba(var(--med-primary-rgb), 0.3); }
                100% { background-color: rgba(var(--med-primary-rgb), 0.1); }
            }
        `;
        document.head.appendChild(style);
    });
</script>
{% endblock %}