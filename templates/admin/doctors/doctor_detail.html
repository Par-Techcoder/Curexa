{% extends 'admin/base.html' %} {% load static %} 
{% block title %} Doctor Details | Curexa Admin{% endblock %} 

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/doctor_details.css' %}" />
{% endblock %}

{% block page_header %}
<!-- Breadcrumb above title -->
<div class="breadcrumb-above-title">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb mb-0">
      <li class="breadcrumb-item">
        <a href="{% url 'admin_dashboard' %}">Dashboard</a>
      </li>
      <li class="breadcrumb-item" aria-current="page">
        <a href={% url 'doctor_list' %}>Doctors</a></li>
      <li class="breadcrumb-item active" aria-current="page">{{doctor.name}}</li>
    </ol>
  </nav>
</div>

<!-- Page Title Section -->
<div class="page-title-section">
    <div class="row align-items-center">
        <div class="col-md-8">
            <h2><i class="fas fa-user-md me-2"></i>Doctor Profile</h2>
            <p class="mb-0">View and manage doctor information</p>
        </div>
        <div class="col-md-4 text-end">
            <div class="action-buttons justify-content-end">
                <button class="btn btn-med-outline" onclick="editDoctor()">
                    <i class="fas fa-edit me-1"></i> Edit
                </button>
                <button class="btn btn-med-outline" onclick="viewSchedule()">
                    <i class="fas fa-calendar me-1"></i> Schedule
                </button>
                <button class="btn btn-med-outline" onclick="goBack()">
                    <i class="fas fa-arrow-left me-1"></i> Back
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
        <div class="row mt-4">
            <!-- Left Column: Doctor Profile -->
            <div class="col-lg-4 col-md-5 mb-4">
                <div class="card medical-border h-100">
                    <div class="card-body">
                        <!-- Profile Image -->
                        <div class="text-center mb-4">
                            <div class="profile-img-container">
                                <img src="https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" 
                                     alt="Dr. John Smith">
                            </div>
                            <h3 class="mb-1">Dr. John Smith</h3>
                            <p class="text-muted mb-3">
                                <i class="fas fa-briefcase-medical me-1"></i>
                                Cardiology Specialist
                            </p>
                            
                            <!-- Status Indicators -->
                            <div class="d-flex justify-content-center gap-3 mb-4">
                                <span class="badge bg-success">
                                    <span class="status-indicator status-active"></span> Active
                                </span>
                                <span class="badge bg-info">
                                    <span class="status-indicator status-available"></span> Available Today
                                </span>
                            </div>
                        </div>
                        
                        <!-- Quick Stats -->
                        <div class="row g-3 mb-4">
                            <div class="col-6">
                                <div class="card stats-card h-100">
                                    <div class="card-body">
                                        <div class="stats-number">1,247</div>
                                        <div class="stats-label">Total Appointments</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="card stats-card h-100">
                                    <div class="card-body">
                                        <div class="stats-number">1,189</div>
                                        <div class="stats-label">Completed</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Contact Information -->
                        <h5 class="mb-3"><i class="fas fa-address-card me-2"></i> Contact Information</h5>
                        <div class="contact-info-list">
                            <div class="contact-info-item">
                                <i class="fas fa-envelope"></i>
                                <div class="ms-3">
                                    <div class="detail-label">Email</div>
                                    <a href="mailto:john.smith@curexa.com" class="detail-value">john.smith@curexa.com</a>
                                </div>
                            </div>
                            <div class="contact-info-item">
                                <i class="fas fa-phone"></i>
                                <div class="ms-3">
                                    <div class="detail-label">Phone</div>
                                    <div class="detail-value">+1 (555) 123-4567</div>
                                </div>
                            </div>
                            <div class="contact-info-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <div class="ms-3">
                                    <div class="detail-label">Clinic Address</div>
                                    <div class="detail-value">123 Medical Center Dr, Suite 405, San Francisco, CA 94107</div>
                                </div>
                            </div>
                            <div class="contact-info-item">
                                <i class="fas fa-id-badge"></i>
                                <div class="ms-3">
                                    <div class="detail-label">Doctor ID</div>
                                    <div class="detail-value">DR-2023-0456</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Right Column: Details & Appointments -->
            <div class="col-lg-8 col-md-7">
                <!-- Professional Details Card -->
                <div class="card medical-border mb-4">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i> Professional Details</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-4">
                                    <div class="detail-label">License Number</div>
                                    <div class="detail-value">MD-12345678</div>
                                </div>
                                <div class="mb-4">
                                    <div class="detail-label">Experience</div>
                                    <div class="detail-value">12 years</div>
                                </div>
                                <div class="mb-4">
                                    <div class="detail-label">Consultation Fee</div>
                                    <div class="detail-value">$150 <small class="text-muted">per session</small></div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-4">
                                    <div class="detail-label">Date of Birth</div>
                                    <div class="detail-value">March 15, 1978 (45 years)</div>
                                </div>
                                <div class="mb-4">
                                    <div class="detail-label">License Expiry</div>
                                    <div class="detail-value license-expired">December 31, 2022</div>
                                </div>
                                <div class="mb-4">
                                    <div class="detail-label">Qualifications</div>
                                    <div class="detail-value">MD, PhD, FACC</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Bio Section -->
                        <div class="bio-section mt-3">
                            <div class="detail-label mb-2"><i class="fas fa-book-medical me-2"></i> Bio</div>
                            <p class="mb-0">
                                Dr. John Smith is a board-certified cardiologist with over 12 years of experience in cardiovascular medicine. 
                                He completed his residency at Johns Hopkins Hospital and fellowship in interventional cardiology at Mayo Clinic. 
                                Dr. Smith specializes in preventive cardiology, heart failure management, and interventional procedures. 
                                He has published over 50 research papers in peer-reviewed journals and is a member of the American College of Cardiology.
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- Today's Appointments -->
                <div class="card medical-border mb-4">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0"><i class="fas fa-calendar-day me-2"></i> Today's Appointments</h5>
                        <span class="badge bg-primary">8 appointments</span>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th width="15%">Time</th>
                                        <th width="30%">Patient</th>
                                        <th width="20%">Type</th>
                                        <th width="20%">Status</th>
                                        <th width="15%">Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><span class="time-badge">9:00 AM</span></td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <img src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" 
                                                     class="patient-avatar me-2">
                                                <div>Michael Johnson</div>
                                            </div>
                                        </td>
                                        <td><span class="badge bg-info">Follow-up</span></td>
                                        <td><span class="badge bg-success">Completed</span></td>
                                        <td>
                                            <button class="action-btn btn-view" title="View Details">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><span class="time-badge">10:30 AM</span></td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" 
                                                     class="patient-avatar me-2">
                                                <div>Sarah Williams</div>
                                            </div>
                                        </td>
                                        <td><span class="badge bg-warning">New Patient</span></td>
                                        <td><span class="badge bg-primary">In Progress</span></td>
                                        <td>
                                            <button class="action-btn btn-view" title="View Details">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><span class="time-badge">11:45 AM</span></td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="patient-avatar bg-secondary d-flex align-items-center justify-content-center me-2 text-white">
                                                    <i class="fas fa-user"></i>
                                                </div>
                                                <div>Robert Chen</div>
                                            </div>
                                        </td>
                                        <td><span class="badge bg-info">Consultation</span></td>
                                        <td><span class="badge bg-warning">Scheduled</span></td>
                                        <td>
                                            <button class="action-btn btn-view" title="View Details">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><span class="time-badge">2:00 PM</span></td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" 
                                                     class="patient-avatar me-2">
                                                <div>David Miller</div>
                                            </div>
                                        </td>
                                        <td><span class="badge bg-danger">Emergency</span></td>
                                        <td><span class="badge bg-warning">Scheduled</span></td>
                                        <td>
                                            <button class="action-btn btn-view" title="View Details">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="text-end mt-3">
                            <button class="btn btn-med-outline btn-sm">
                                <i class="fas fa-plus me-1"></i> Add Appointment
                            </button>
                            <button class="btn btn-med-primary btn-sm ms-2">
                                <i class="fas fa-list me-1"></i> View All Today
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Upcoming Appointments -->
                <div class="card medical-border">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-calendar-alt me-2"></i> Upcoming Appointments (Next 7 Days)</h5>
                    </div>
                    <div class="card-body">
                        <div class="list-group">
                            <div class="list-group-item">
                                <div class="d-flex w-100 justify-content-between align-items-center">
                                    <div>
                                        <h6 class="mb-1">Maria Garcia</h6>
                                        <small class="text-muted">
                                            <i class="fas fa-calendar me-1"></i> Tomorrow, 10:00 AM
                                            <span class="badge bg-info ms-2">Follow-up</span>
                                        </small>
                                    </div>
                                    <div>
                                        <button class="action-btn btn-view" title="View Details">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="list-group-item">
                                <div class="d-flex w-100 justify-content-between align-items-center">
                                    <div>
                                        <h6 class="mb-1">James Wilson</h6>
                                        <small class="text-muted">
                                            <i class="fas fa-calendar me-1"></i> Wednesday, 2:30 PM
                                            <span class="badge bg-warning ms-2">New Patient</span>
                                        </small>
                                    </div>
                                    <div>
                                        <button class="action-btn btn-view" title="View Details">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="list-group-item">
                                <div class="d-flex w-100 justify-content-between align-items-center">
                                    <div>
                                        <h6 class="mb-1">Lisa Taylor</h6>
                                        <small class="text-muted">
                                            <i class="fas fa-calendar me-1"></i> Friday, 11:15 AM
                                            <span class="badge bg-info ms-2">Consultation</span>
                                        </small>
                                    </div>
                                    <div>
                                        <button class="action-btn btn-view" title="View Details">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="list-group-item">
                                <div class="d-flex w-100 justify-content-between align-items-center">
                                    <div>
                                        <h6 class="mb-1">Thomas Brown</h6>
                                        <small class="text-muted">
                                            <i class="fas fa-calendar me-1"></i> Saturday, 9:45 AM
                                            <span class="badge bg-info ms-2">Follow-up</span>
                                        </small>
                                    </div>
                                    <div>
                                        <button class="action-btn btn-view" title="View Details">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Statistics Row -->
        <div class="row mt-4">
            <div class="col-md-3 col-6 mb-4">
                <div class="card medical-border">
                    <div class="card-body text-center">
                        <i class="fas fa-users fa-3x text-primary mb-3"></i>
                        <h2 class="stats-number">428</h2>
                        <p class="stats-label">Unique Patients</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-4">
                <div class="card medical-border">
                    <div class="card-body text-center">
                        <i class="fas fa-calendar-check fa-3x text-success mb-3"></i>
                        <h2 class="stats-number">89</h2>
                        <p class="stats-label">This Month</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-4">
                <div class="card medical-border">
                    <div class="card-body text-center">
                        <i class="fas fa-percentage fa-3x text-info mb-3"></i>
                        <h2 class="stats-number">95%</h2>
                        <p class="stats-label">Completion Rate</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-4">
                <div class="card medical-border">
                    <div class="card-body text-center">
                        <i class="fas fa-money-bill-wave fa-3x text-warning mb-3"></i>
                        <h2 class="stats-number">$150</h2>
                        <p class="stats-label">Consultation Fee</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Action Buttons -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card medical-border">
                    <div class="card-body">
                        <div class="d-flex flex-wrap justify-content-between align-items-center">
                            <div class="action-buttons mb-3 mb-md-0">
                                <button class="btn btn-med-outline" onclick="sendReminder()">
                                    <i class="fas fa-bell me-2"></i> Send Reminder
                                </button>
                                <button class="btn btn-med-outline" onclick="generateReport()">
                                    <i class="fas fa-chart-bar me-2"></i> Generate Report
                                </button>
                                <button class="btn btn-med-outline" onclick="viewSchedule()">
                                    <i class="fas fa-clock me-2"></i> View Schedule
                                </button>
                            </div>
                            <div class="action-buttons">
                                <button class="btn btn-med-outline" onclick="toggleAvailability()">
                                    <i class="fas fa-toggle-on me-2"></i> Toggle Availability
                                </button>
                                <button class="btn btn-med-outline btn-delete" onclick="confirmDelete()">
                                    <i class="fas fa-trash-alt me-2"></i> Delete Doctor
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Delete Confirmation Modal -->
    <div class="modal fade custom-modal" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-exclamation-triangle me-2"></i> Confirm Deletion</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete <strong>Dr. John Smith</strong>?</p>
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-circle me-2"></i>
                        This action will:
                        <ul class="mb-0 mt-2">
                            <li>Remove the doctor from the system</li>
                            <li>Cancel all future appointments</li>
                            <li>Archive medical records</li>
                            <li><strong>This action cannot be undone!</strong></li>
                        </ul>
                    </div>
                    <div class="mb-3">
                        <label for="confirmDeleteInput" class="form-label">Type "DELETE" to confirm:</label>
                        <input type="text" class="form-control" id="confirmDeleteInput" placeholder="Type DELETE here">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn" disabled>Delete Doctor</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toast Container for Alerts -->
    <div id="toastContainer" style="position: fixed; top: 20px; right: 20px; z-index: 9999;"></div>
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Initialize Bootstrap components
        document.addEventListener('DOMContentLoaded', function() {
            // Delete confirmation modal logic
            const deleteModal = new bootstrap.Modal(document.getElementById('deleteModal'));
            const confirmInput = document.getElementById('confirmDeleteInput');
            const confirmBtn = document.getElementById('confirmDeleteBtn');
            
            window.confirmDelete = function() {
                confirmInput.value = '';
                confirmBtn.disabled = true;
                deleteModal.show();
            };
            
            confirmInput.addEventListener('input', function() {
                confirmBtn.disabled = this.value !== 'DELETE';
            });
            
            confirmBtn.addEventListener('click', function() {
                showAlert('Doctor deleted successfully!', 'success');
                deleteModal.hide();
                
                // Simulate redirect after deletion
                setTimeout(() => {
                    window.location.href = '#';
                }, 1500);
            });
        });
        
        // Show alert/toast message
        function showAlert(message, type) {
            const toastContainer = document.getElementById('toastContainer');
            const alertId = 'alert-' + Date.now();
            
            const alertHtml = `
                <div id="${alertId}" class="alert alert-${type} alert-dismissible fade show alert-toast" role="alert">
                    <div class="d-flex align-items-center">
                        <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'} me-2"></i>
                        <div>${message}</div>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            `;
            
            toastContainer.insertAdjacentHTML('afterbegin', alertHtml);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                const alertElement = document.getElementById(alertId);
                if (alertElement) {
                    const bsAlert = new bootstrap.Alert(alertElement);
                    bsAlert.close();
                }
            }, 5000);
        }
        
        // Button action functions
        function editDoctor() {
            showAlert('Redirecting to edit page...', 'info');
            // In real implementation: window.location.href = '/doctors/1/edit/';
        }
        
        function viewSchedule() {
            showAlert('Opening schedule management...', 'info');
            // In real implementation: window.location.href = '/doctors/1/schedules/';
        }
        
        function goBack() {
            window.history.back();
        }
        
        function sendReminder() {
            showAlert('Reminder sent to doctor successfully!', 'success');
        }
        
        function generateReport() {
            showAlert('Generating doctor report...', 'info');
            // In real implementation: window.open('/reports/doctor/1/', '_blank');
        }
        
        function toggleAvailability() {
            showAlert('Doctor availability toggled successfully!', 'success');
        }
        
        function viewAppointment(appointmentId) {
            showAlert(`Viewing appointment ${appointmentId} details...`, 'info');
        }
        
        // View appointment button handlers
        document.addEventListener('click', function(e) {
            if (e.target.closest('.action-btn.btn-view')) {
                showAlert('Viewing appointment details...', 'info');
            }
        });
    </script>



{%endblock%}